import{_ as R,f as $,c as f,a as o,w as i,g as C,h as H,r as b,o as u,b as d,t as m,F as T,j as F,e as h}from"./index-zzYLg-eD.js";const v={name:"WebHook",data(){return{webHookList:[],isLoading:!0,newWebHookDialogVisible:!1,editWebHookDialogVisible:!1,newWebHookForm:{URL:"",Type:"",Token:"",Retry:0,Timeout:0},editWebHookForm:{},typeOptions:{any:this.$i18n.t("webhook.type_any"),new_round:this.$i18n.t("webhook.type_new_round"),submit_flag:this.$i18n.t("webhook.type_submit_flag"),game_begin:this.$i18n.t("webhook.type_game_begin"),game_pause:this.$i18n.t("webhook.type_game_pause"),game_end:this.$i18n.t("webhook.type_game_end")}}},mounted(){this.getWebHooks()},methods:{getWebHooks(){this.utils.GET("/manager/webhooks").then(e=>{this.webHookList=e,this.isLoading=!1}).catch(e=>this.$message.error(e))},onNewWebHook(){this.utils.POST("/manager/webhook",this.newWebHookForm).then(e=>{this.$message.success(e),this.newWebHookDialogVisible=!1,this.newWebHookForm={URL:"",Type:"",Token:"",Retry:0,Timeout:0},this.getWebHooks()}).catch(e=>{this.$message.error(e)})},onEditWebHook(){this.utils.PUT("/manager/webhook",this.editWebHookForm).then(e=>{this.$message.success(e),this.editWebHookDialogVisible=!1,this.getWebHooks()}).catch(e=>{this.$message.error(e)})},handleDelete(e){this.utils.DELETE("/manager/webhook?id="+e.ID).then(n=>{this.$message({message:n,type:"success"}),this.getWebHooks()}).catch(n=>this.$message({message:n,type:"error"}))}}};function O(e,n,c,B,l,g){const k=b("el-button"),r=b("el-table-column"),U=b("el-popconfirm"),D=b("el-table"),p=b("el-input"),s=b("el-form-item"),V=b("el-option"),W=b("el-select"),w=b("el-input-number"),y=b("el-form"),_=b("el-dialog"),L=$("loading");return u(),f("div",null,[o(k,{type:"primary",onClick:n[0]||(n[0]=t=>l.newWebHookDialogVisible=!0)},{default:i(()=>[d(m(e.$t("webhook.add")),1)]),_:1}),C((u(),H(D,{data:l.webHookList,style:{width:"100%"},stripe:""},{default:i(()=>[o(r,{width:"80",prop:"ID",label:"ID"}),o(r,{prop:"URL",label:e.$t("webhook.url")},null,8,["label"]),o(r,{prop:"Type",label:e.$t("webhook.type")},{default:i(t=>[d(m(l.typeOptions[t.row.Type]),1)]),_:1},8,["label"]),o(r,{prop:"Token",label:e.$t("webhook.token")},null,8,["label"]),o(r,{width:"120",prop:"Retry",label:e.$t("webhook.retry")},null,8,["label"]),o(r,{width:"120",prop:"Timeout",label:e.$t("webhook.timeout")},null,8,["label"]),o(r,{label:e.$t("general.operate"),width:"300"},{default:i(t=>[o(k,{size:"mini",onClick:()=>{l.editWebHookForm=JSON.parse(JSON.stringify(t.row)),l.editWebHookDialogVisible=!0}},{default:i(()=>[d(m(e.$t("general.edit")),1)]),_:2},1032,["onClick"]),o(U,{confirmButtonText:e.$t("general.confirm_cancel"),cancelButtonText:e.$t("general.cancel"),icon:"el-icon-info",iconColor:"red",title:e.$t("webhook.delete_title"),onOnConfirm:a=>g.handleDelete(t.row)},{reference:i(()=>[o(k,{size:"mini",type:"danger",slot:"reference"},{default:i(()=>[d(m(e.$t("general.delete")),1)]),_:1})]),_:2},1032,["confirmButtonText","cancelButtonText","title","onOnConfirm"])]),_:1},8,["label"])]),_:1},8,["data"])),[[L,l.isLoading]]),o(_,{title:e.$t("webhook.add"),modelValue:l.newWebHookDialogVisible,"onUpdate:modelValue":n[6]||(n[6]=t=>l.newWebHookDialogVisible=t)},{default:i(()=>[o(y,{model:l.newWebHookForm,"label-width":"120px"},{default:i(()=>[o(s,{label:e.$t("webhook.url")},{default:i(()=>[o(p,{modelValue:l.newWebHookForm.URL,"onUpdate:modelValue":n[1]||(n[1]=t=>l.newWebHookForm.URL=t)},null,8,["modelValue"])]),_:1},8,["label"]),o(s,{label:e.$t("webhook.type")},{default:i(()=>[o(W,{modelValue:l.newWebHookForm.Type,"onUpdate:modelValue":n[2]||(n[2]=t=>l.newWebHookForm.Type=t),placeholder:e.$t("webhook.please_select")},{default:i(()=>[(u(!0),f(T,null,F(l.typeOptions,(t,a)=>(u(),H(V,{key:a,label:t,value:a},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),o(s,{label:e.$t("webhook.token")},{default:i(()=>[o(p,{modelValue:l.newWebHookForm.Token,"onUpdate:modelValue":n[3]||(n[3]=t=>l.newWebHookForm.Token=t)},null,8,["modelValue"]),h("p",null,m(e.$t("webhook.token_tips")),1)]),_:1},8,["label"]),o(s,{label:e.$t("webhook.retry")},{default:i(()=>[o(w,{modelValue:l.newWebHookForm.Retry,"onUpdate:modelValue":n[4]||(n[4]=t=>l.newWebHookForm.Retry=t),min:0},null,8,["modelValue"])]),_:1},8,["label"]),o(s,{label:e.$t("webhook.timeout")},{default:i(()=>[o(w,{modelValue:l.newWebHookForm.Timeout,"onUpdate:modelValue":n[5]||(n[5]=t=>l.newWebHookForm.Timeout=t),min:0},null,8,["modelValue"]),h("p",null,m(e.$t("webhook.timeout_tips")),1)]),_:1},8,["label"])]),_:1},8,["model"]),o(k,{type:"primary",onClick:g.onNewWebHook},{default:i(()=>[d(m(e.$t("webhook.publish")),1)]),_:1},8,["onClick"])]),_:1},8,["title","modelValue"]),o(_,{title:e.$t("webhook.edit"),modelValue:l.editWebHookDialogVisible,"onUpdate:modelValue":n[12]||(n[12]=t=>l.editWebHookDialogVisible=t)},{default:i(()=>[o(y,{model:l.editWebHookForm,"label-width":"120px"},{default:i(()=>[o(s,{label:e.$t("webhook.url")},{default:i(()=>[o(p,{modelValue:l.editWebHookForm.URL,"onUpdate:modelValue":n[7]||(n[7]=t=>l.editWebHookForm.URL=t)},null,8,["modelValue"])]),_:1},8,["label"]),o(s,{label:e.$t("webhook.type")},{default:i(()=>[o(W,{modelValue:l.editWebHookForm.Type,"onUpdate:modelValue":n[8]||(n[8]=t=>l.editWebHookForm.Type=t),placeholder:e.$t("webhook.please_select")},{default:i(()=>[(u(!0),f(T,null,F(l.typeOptions,(t,a)=>(u(),H(V,{key:a,label:t,value:a},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),o(s,{label:e.$t("webhook.token")},{default:i(()=>[o(p,{modelValue:l.editWebHookForm.Token,"onUpdate:modelValue":n[9]||(n[9]=t=>l.editWebHookForm.Token=t)},null,8,["modelValue"]),h("p",null,m(e.$t("webhook.token_tips")),1)]),_:1},8,["label"]),o(s,{label:e.$t("webhook.retry")},{default:i(()=>[o(w,{modelValue:l.editWebHookForm.Retry,"onUpdate:modelValue":n[10]||(n[10]=t=>l.editWebHookForm.Retry=t),min:0},null,8,["modelValue"])]),_:1},8,["label"]),o(s,{label:e.$t("webhook.timeout")},{default:i(()=>[o(w,{modelValue:l.editWebHookForm.Timeout,"onUpdate:modelValue":n[11]||(n[11]=t=>l.editWebHookForm.Timeout=t),min:0},null,8,["modelValue"]),h("p",null,m(e.$t("webhook.timeout_tips")),1)]),_:1},8,["label"])]),_:1},8,["model"]),o(k,{type:"primary",onClick:g.onEditWebHook},{default:i(()=>[d(m(e.$t("webhook.edit")),1)]),_:1},8,["onClick"])]),_:1},8,["title","modelValue"])])}const N=R(v,[["render",O]]);export{N as default};
