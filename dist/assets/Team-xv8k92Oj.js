import{k as b,l as K,u as f,c as C,a as e,w as a,m as T,q as o,e as A,t as r,r as d,o as L,b as u,F as O,j as R}from"./index-dsBVlsEF.js";const j={slot:"tip",class:"el-upload__tip"},J={slot:"tip",class:"el-upload__tip"},P={__name:"Team",setup(E){let $=b({}),p=b(!1),c=b(!1),N=localStorage.getItem("managerToken"),w=b([{Name:"",Logo:""}]),i=b({Name:"",Logo:""});K(()=>{console.log("the component is now mounted."),U()}),$.value=[{ID:1,CreatedAt:"2024-01-31T00:01:41+08:00",UpdatedAt:"2024-01-31T00:01:41+08:00",DeletedAt:null,Name:"aaa",Logo:"462d4e0dc773dc9d.png",Score:0,SecretKey:"a3e5c9a08745f9f7"},{ID:2,CreatedAt:"2024-01-31T00:02:21+08:00",UpdatedAt:"2024-01-31T00:02:21+08:00",DeletedAt:null,Name:"bbb",Logo:"3732f504d96dcfa2.png",Score:0,SecretKey:"2305fc73c36f4ea2"},{ID:3,CreatedAt:"2024-01-31T00:03:28+08:00",UpdatedAt:"2024-01-31T00:03:28+08:00",DeletedAt:null,Name:"ddd",Logo:"e60969c4a99ec443.png",Score:0,SecretKey:"4e87e8dbb74206f2"},{ID:4,CreatedAt:"2024-01-31T00:47:07+08:00",UpdatedAt:"2024-01-31T00:47:07+08:00",DeletedAt:null,Name:"eeee",Logo:"https://image.16pic.com/00/53/26/16pic_5326745_s.jpg.png",Score:0,SecretKey:"2997bf7f05ab7e6e"},{ID:5,CreatedAt:"2024-01-31T00:50:38+08:00",UpdatedAt:"2024-01-31T00:50:38+08:00",DeletedAt:null,Name:"sss",Logo:"https://image.16pic.com/00/53/26/16pic_5326745_s.jpg",Score:0,SecretKey:"aa0e68fec0848d90"},{ID:6,CreatedAt:"2024-01-31T00:51:55+08:00",UpdatedAt:"2024-01-31T00:51:55+08:00",DeletedAt:null,Name:"zzz",Logo:"https://image.16pic.com/00/53/26/16pic_5326745_s.jpg",Score:0,SecretKey:"1a617a31d370d913"}];const U=()=>{f.GET("/manager/teams").then(t=>{console.log("getTeams func worked! "),$.value=t}).catch(t=>this.$message({message:t,type:"error"}))};return(t,n)=>{const m=d("el-button"),s=d("el-table-column"),z=d("el-image"),h=d("el-popconfirm"),B=d("el-table"),I=d("el-divider"),y=d("el-input"),_=d("el-form-item"),S=d("el-col"),D=d("el-upload"),k=d("el-form"),F=d("el-row"),v=d("el-dialog");return L(),C("div",null,[e(m,{type:"primary",onClick:n[0]||(n[0]=l=>T(p)?p.value=!0:p=!0)},{default:a(()=>[u(r(t.$t("team.add")),1)]),_:1}),e(B,{data:o($),style:{width:"100%"}},{default:a(()=>[e(s,{prop:"ID",label:"ID",width:"180"}),e(s,{prop:"Logo",label:t.$t("team.logo"),width:"180"},{default:a(l=>[e(z,{style:{width:"50px",height:"50px"},src:o(f).baseURL+"/uploads/"+l.row.Logo,fit:"fill"},null,8,["src"])]),_:1},8,["label"]),e(s,{prop:"Name",label:t.$t("team.team_name")},null,8,["label"]),e(s,{prop:"Score",label:t.$t("team.score"),formatter:l=>o(f).FormatFloat(l.Score)},null,8,["label","formatter"]),e(s,{width:"300",prop:"SecretKey",label:"Token"}),e(s,{label:t.$t("general.create_at"),width:"180",formatter:l=>o(f).FormatGoTime(l.CreatedAt)},null,8,["label","formatter"]),e(s,{label:t.$t("general.update_at"),width:"180",formatter:l=>o(f).FormatGoTime(l.UpdatedAt)},null,8,["label","formatter"]),e(s,{label:t.$t("general.operate"),width:"200"},{default:a(l=>[e(m,{size:"mini",onClick:()=>{T(i)?i.value=JSON.parse(JSON.stringify(l.row)):i=JSON.parse(JSON.stringify(l.row)),T(c)?c.value=!0:c=!0}},{default:a(()=>[u(r(t.$t("general.edit")),1)]),_:2},1032,["onClick"]),e(h,{confirmButtonText:t.$t("general.confirm_cancel"),cancelButtonText:t.$t("general.cancel"),icon:"el-icon-info",iconColor:"red",title:t.$t("team.delete_confirm"),onOnConfirm:V=>t.handleDelete(l.row)},null,8,["confirmButtonText","cancelButtonText","title","onOnConfirm"]),e(m,{size:"mini",type:"danger",slot:"reference"},{default:a(()=>[u(r(t.$t("general.delete")),1)]),_:1})]),_:1},8,["label"])]),_:1},8,["data"]),A("div",null,r(o($)),1),e(v,{title:t.$t("team.add"),modelValue:o(p),"onUpdate:modelValue":n[2]||(n[2]=l=>T(p)?p.value=l:p=l)},{default:a(()=>[e(m,{onClick:n[1]||(n[1]=l=>o(w).push({Name:"",Logo:""}))},{default:a(()=>[u(r(t.$t("team.new")),1)]),_:1}),e(I),(L(!0),C(O,null,R(o(w),(l,V)=>(L(),C("div",{key:V},[e(F,{gutter:20},{default:a(()=>[e(k,{model:l,"label-width":"80px"},{default:a(()=>[e(m,{type:"danger",icon:"el-icon-delete",circle:"",onClick:g=>o(w).splice(V,1)},null,8,["onClick"]),e(S,{span:10},{default:a(()=>[e(_,{label:t.$t("team.team_name")},{default:a(()=>[e(y,{modelValue:l.Name,"onUpdate:modelValue":g=>l.Name=g},null,8,["modelValue","onUpdate:modelValue"]),e(y,{modelValue:l.Logo,"onUpdate:modelValue":g=>l.Logo=g,size:"mini",placeholder:t.$t("team.picture_url")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label"])]),_:2},1024),e(S,{span:10},{default:a(()=>[e(_,{label:t.$t("team.team_logo")},{default:a(()=>[e(D,{name:"picture",action:o(f).baseURL+"/manager/uploadPicture",headers:{Authorization:o(N)},"on-success":g=>{o(w)[V].Logo=g.data}},{default:a(()=>[e(m,{size:"small",type:"primary"},{default:a(()=>[u(r(t.$t("team.upload")),1)]),_:1}),A("div",j,r(t.$t("team.file_limit")),1)]),_:2},1032,["action","headers","on-success"])]),_:2},1032,["label"])]),_:2},1024)]),_:2},1032,["model"])]),_:2},1024)]))),128)),e(m,{type:"primary",onClick:t.onNewTeams},{default:a(()=>[u(r(t.$t("team.add")),1)]),_:1},8,["onClick"])]),_:1},8,["title","modelValue"]),e(v,{title:t.$t("team.edit"),modelValue:o(c),"onUpdate:modelValue":n[6]||(n[6]=l=>T(c)?c.value=l:c=l)},{default:a(()=>[e(k,{"label-width":"80px"},{default:a(()=>[e(_,{label:t.$t("team.team_name")},{default:a(()=>[e(y,{modelValue:o(i).Name,"onUpdate:modelValue":n[3]||(n[3]=l=>o(i).Name=l)},null,8,["modelValue"]),e(y,{modelValue:o(i).Logo,"onUpdate:modelValue":n[4]||(n[4]=l=>o(i).Logo=l),size:"mini",placeholder:t.$t("team.picture_url")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(_,{label:t.$t("team.team_logo")},{default:a(()=>[e(D,{name:"picture",action:o(f).baseURL+"/manager/uploadPicture",headers:{Authorization:o(N)},"on-success":l=>{o(i).Logo=l.data}},{default:a(()=>[e(m,{size:"small",type:"primary"},{default:a(()=>[u(r(t.$t("team.upload")),1)]),_:1}),A("div",J,r(t.$t("team.file_limit")),1)]),_:1},8,["action","headers","on-success"])]),_:1},8,["label"]),e(_,null,{default:a(()=>[e(m,{type:"primary",onClick:t.onEditTeam},{default:a(()=>[u(r(t.$t("team.edit")),1)]),_:1},8,["onClick"]),e(h,{title:t.$t("team.reset_password_confirm"),confirmButtonText:t.$t("general.apply"),cancelButtonText:t.$t("general.cancel"),onOnConfirm:n[5]||(n[5]=l=>t.onResetPassword(o(i).ID))},{default:a(()=>[e(m,{slot:"reference"},{default:a(()=>[u(r(t.$t("team.reset_password")),1)]),_:1})]),_:1},8,["title","confirmButtonText","cancelButtonText"])]),_:1})]),_:1})]),_:1},8,["title","modelValue"])])}}};export{P as default};
