import{_ as $,f as w,c as C,a as l,w as n,g as c,h as y,r as o,o as f,b as s,t as r}from"./index-w83zdtlJ.js";const D={name:"Bulletin",data:()=>({newBulletinDialogVisible:!1,editBulletinDialogVisible:!1,bulletinList:null,editBulletinForm:{Title:"",Content:""},newBulletinForm:{Title:"",Content:""}}),mounted(){this.getBulletin()},methods:{getBulletin(){this.utils.GET("/manager/bulletins").then(e=>{this.bulletinList=e}).catch(e=>this.$message({message:e,type:"error"}))},onNewBulletin(){this.utils.POST("/manager/bulletin",this.newBulletinForm).then(e=>{this.newBulletinDialogVisible=!1,this.newBulletinForm={Title:"",Content:""},this.$message({message:e,type:"success"}),this.getBulletin()}).catch(e=>this.$message({message:e,type:"error"}))},handleEdit(){this.utils.PUT("/manager/bulletin",this.editBulletinForm).then(e=>{this.editBulletinDialogVisible=!1,this.$message({message:e,type:"success"}),this.getBulletin()}).catch(e=>this.$message({message:e,type:"error"}))},handleDelete(e){this.utils.DELETE("/manager/bulletin?id="+e).then(t=>{this.$message({message:t,type:"success"}),this.getBulletin()}).catch(t=>this.$message({message:t,type:"error"}))}}};function F(e,t,T,k,v,p){const a=o("el-button"),u=o("el-table-column"),B=o("el-popconfirm"),h=o("el-table"),d=o("el-input"),m=o("el-form-item"),b=o("el-form"),g=o("el-dialog"),V=w("loading");return f(),C("div",null,[l(a,{type:"primary",onClick:t[0]||(t[0]=i=>e.newBulletinDialogVisible=!0)},{default:n(()=>[s(r(e.$t("bulletin.publish")),1)]),_:1}),c((f(),y(h,{data:e.bulletinList,style:{width:"100%"},stripe:""},{default:n(()=>[l(u,{width:"80",prop:"ID",label:"ID"}),l(u,{prop:"Title",label:e.$t("bulletin.title")},null,8,["label"]),l(u,{prop:"Content",label:e.$t("bulletin.content")},null,8,["label"]),l(u,{label:e.$t("general.create_at"),width:"200",formatter:i=>e.utils.FormatGoTime(i.CreatedAt)},null,8,["label","formatter"]),l(u,{label:e.$t("general.operate"),width:"300"},{default:n(i=>[l(a,{size:"mini",onClick:()=>{e.editBulletinForm=JSON.parse(JSON.stringify(i.row)),e.editBulletinDialogVisible=!0}},{default:n(()=>[s(r(e.$t("general.edit")),1)]),_:2},1032,["onClick"]),l(B,{confirmButtonText:"$t('general.confirm_cancel')",cancelButtonText:"$t('general.cancel')",icon:"el-icon-info",iconColor:"red",title:e.$t("bulletin.delete_title"),onOnConfirm:E=>p.handleDelete(i.row.ID)},{default:n(()=>[l(a,{size:"mini",type:"danger",slot:"reference"},{default:n(()=>[s(r(e.$t("general.delete")),1)]),_:1})]),_:2},1032,["title","onOnConfirm"])]),_:1},8,["label"])]),_:1},8,["data"])),[[V,e.bulletinList===null]]),l(g,{title:e.$t("bulletin.publish"),modelValue:e.newBulletinDialogVisible,"onUpdate:modelValue":t[3]||(t[3]=i=>e.newBulletinDialogVisible=i)},{default:n(()=>[l(b,{model:e.newBulletinForm,"label-width":"80px"},{default:n(()=>[l(m,{label:e.$t("bulletin.title")},{default:n(()=>[l(d,{modelValue:e.newBulletinForm.Title,"onUpdate:modelValue":t[1]||(t[1]=i=>e.newBulletinForm.Title=i)},null,8,["modelValue"])]),_:1},8,["label"]),l(m,{label:e.$t("bulletin.content")},{default:n(()=>[l(d,{type:"textarea",rows:3,placeholder:e.$t("bulletin.content_placeholder"),modelValue:e.newBulletinForm.Content,"onUpdate:modelValue":t[2]||(t[2]=i=>e.newBulletinForm.Content=i)},null,8,["placeholder","modelValue"])]),_:1},8,["label"])]),_:1},8,["model"]),l(a,{type:"primary",onClick:p.onNewBulletin},{default:n(()=>[s(r(e.$t("bulletin.publish")),1)]),_:1},8,["onClick"])]),_:1},8,["title","modelValue"]),l(g,{title:e.$t("bulletin.edit"),modelValue:e.editBulletinDialogVisible,"onUpdate:modelValue":t[6]||(t[6]=i=>e.editBulletinDialogVisible=i)},{default:n(()=>[l(b,{model:e.editBulletinForm,"label-width":"80px"},{default:n(()=>[l(m,{label:e.$t("bulletin.title")},{default:n(()=>[l(d,{modelValue:e.editBulletinForm.Title,"onUpdate:modelValue":t[4]||(t[4]=i=>e.editBulletinForm.Title=i)},null,8,["modelValue"])]),_:1},8,["label"]),l(m,{label:e.$t("bulletin.content")},{default:n(()=>[l(d,{type:"textarea",rows:3,placeholder:e.$t("bulletin.content_placeholder"),modelValue:e.editBulletinForm.Content,"onUpdate:modelValue":t[5]||(t[5]=i=>e.editBulletinForm.Content=i)},null,8,["placeholder","modelValue"])]),_:1},8,["label"])]),_:1},8,["model"]),l(a,{type:"primary",onClick:p.handleEdit},{default:n(()=>[s(r(e.$t("bulletin.edit")),1)]),_:1},8,["onClick"])]),_:1},8,["title","modelValue"])])}const N=$(D,[["render",F]]);export{N as default};
