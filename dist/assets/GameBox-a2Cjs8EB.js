import{_ as z,f as J,c as $,a as l,w as a,g as x,h as k,e as f,r as g,o as p,b as r,t as n,F as I,j as D,x as L,i as A}from"./index-zzYLg-eD.js";const j={name:"GameBox",data:()=>({newGameBoxDialogVisible:!1,editGameBoxDialogVisible:!1,mutliGameBoxDialogVisible:!1,sshFailDialogVisible:!1,sshTesting:!1,gameBoxList:null,teams:[],challenges:[],newGameBoxForm:[],editGameBoxForm:{ChallengeTitle:"",TeamName:"",IP:"",Port:"",SSHPort:"",SSHUser:"",SSHPassword:"",Description:""},loadingDockerfile:!1,dockerImageVisible:!1,inputPortVisible:!1,inputPortValue:"",dockerImageText:"wuhan005/awd_web:latest",dockerImageForm:{User:"",Image:"",Tag:""},dockerInfo:null,dockerForm:{Image:"",Challenge:null,IP:"",ServicePort:"",SSHPort:"",RootSSHName:"",UserSSHName:"",Description:`SSH 端口：{{ssh_port}}
SSH 账号：{{ssh_name}}
SSH 密码：{{ssh_password}}`,Ports:[]},mutliGameBoxJSON:"",sshFailContent:"",page:1,per:10,total:0}),async mounted(){await this.getTeams(),await this.getChallenges(),await this.getGameBoxes()},methods:{getGameBoxes(){return new Promise(e=>{this.utils.GET(`/manager/gameboxes?page=${this.page}&per=${this.per}`).then(o=>{let m=o.Data;m.forEach((P,w)=>{m[w].ChallengeTitle=this.getChallengeByID(P.ChallengeID).Title,m[w].TeamName=this.getTeamByID(P.TeamID).Name}),this.gameBoxList=m,this.total=o.Total,e()}).catch(o=>{this.$message.error(o),e()})})},getTeams(){return new Promise(e=>{this.utils.GET("/manager/teams").then(o=>{this.teams=o,e()}).catch(o=>{this.$message.error(o),e()})})},async getChallenges(){return new Promise(e=>{this.utils.GET("/manager/challenges").then(o=>{this.challenges=o,e()}).catch(o=>{this.$message.error(o),e()})})},mutliGameBox(){let e=JSON.parse(JSON.stringify(this.newGameBoxForm));try{JSON.parse(this.mutliGameBoxJSON).forEach(m=>{this.newGameBoxForm.push({ChallengeID:m.ChallengeID,TeamID:m.TeamID,IP:m.IP,Port:m.Port,SSHPort:m.SSHPort!==void 0?m.SSHPort:"",SSHUser:m.SSHUser!==void 0?m.SSHUser:"",SSHPassword:m.SSHPassword!==void 0?m.SSHPassword:"",Description:m.Description})}),this.mutliGameBoxDialogVisible=!1,this.mutliGameBoxJSON=""}catch{this.$message.error(this.$i18n.t("gamebox.json_parse_error")),this.newGameBoxForm=e}},onNewGameBox(){this.utils.POST("/manager/gameboxes",this.newGameBoxForm).then(e=>{this.newGameBoxDialogVisible=!1,this.getGameBoxes(),this.newGameBoxForm=[],this.$message({message:e,type:"success"})}).catch(e=>this.$message.error(e))},onEditGameBox(){this.utils.PUT("/manager/gamebox",this.editGameBoxForm).then(e=>{this.editGameBoxDialogVisible=!1,this.getGameBoxes(),this.$message.success(e)}).catch(e=>this.$message.error(e))},handleDelete(e){this.utils.DELETE("/manager/gamebox?id="+e.ID).then(o=>{this.$message({message:o,type:"success"}),this.getGameBoxes()}).catch(o=>this.$message({message:o,type:"error"}))},getChallengeByID(e){let o=null;return this.challenges.forEach(m=>{m.ID===e&&(o=m)}),o},getTeamByID(e){let o=null;return this.teams.forEach(m=>{m.ID===e&&(o=m)}),o},getImageData(){this.loadingDockerfile=!0,this.dockerImageForm.User=this.dockerImageText.split("/")[0],this.dockerImageForm.Image=this.dockerImageText.split("/")[1].split(":")[0],this.dockerImageForm.Tag=this.dockerImageText.split(":")[1],this.utils.POST("/manager/docker/findImage",this.dockerImageForm).then(e=>{this.loadingDockerfile=!1;for(let o=0;o<e.Ports.length;o++)this.dockerForm.Ports.push({In:e.Ports[o],Out:1e4+o*1e3});this.dockerForm.Image=e.Image,this.dockerInfo=e}).catch(e=>{this.$message({message:e,type:"error"}),this.loadingDockerfile=!1})},inputPortConfirm(){let e=this.inputPortValue;e&&this.dockerForm.Ports.push({In:e,Out:0}),this.inputPortVisible=!1,this.inputPortValue=""},deployFromDocker(){this.utils.POST("/manager/docker/deploy",this.dockerForm).then(e=>{console.log(e)}).catch(e=>this.$message({message:e,type:"error"}))},testAllSSH(){this.sshTesting=!0,this.utils.GET("/manager/gameboxes/sshTest").then(e=>{if(this.sshTesting=!1,e===null)return this.$message.success(this.$i18n.t("gamebox.test_ssh_success"));this.sshFailContent="",e.forEach(o=>{this.sshFailContent+=`<strong>TeamID：</strong>${o.TeamID}<br><strong>ChallengeID：</strong>${o.ChallengeID}<br><strong>GameBoxID：</strong>${o.GameBoxID}<br><strong>Error：</strong>${o.Error}<hr>`}),this.sshFailDialogVisible=!0})},testGameBoxSSH(e,o,m,P){this.$prompt(this.$t("gamebox.input_shell_command"),"",{confirmButtonText:this.$t("general.apply"),cancelButtonText:this.$t("general.cancel")}).then(({value:w})=>{this.utils.POST("/manager/gameboxes/sshTest",{IP:e,Port:o,User:m,Password:P,Command:w}).then(h=>this.$alert(h,this.$t("general.success"))).catch(h=>this.$alert(h,this.$t("general.fail")))}).catch(()=>{})},refreshFlag(){this.utils.GET("/manager/gameboxes/refreshFlag").then(e=>this.$message.success(e)).catch(e=>this.$message.error(e))},resetGameBox(){this.utils.GET("/manager/gameboxes/reset").then(e=>this.$message.success(e)).catch(e=>this.$message.error(e))}}},K=f("i",{class:"el-icon-arrow-down el-icon--right"},null,-1),R=f("br",null,null,-1),M=f("code",null,'[{ "ChallengeID": 1, "TeamID": 1, "IP": "", "Port": "", "SSHPort": "", "SSHUser": "", "SSHPassword": "", "Description": "" }]',-1),q={slot:"footer",class:"dialog-footer"},Q=["innerHTML"],W={slot:"footer",class:"dialog-footer"},X=f("template",{slot:"prepend"},[r("docker pull")],-1),Y=f("br",null,null,-1),Z={key:0},ee=f("br",null,null,-1),le=f("div",{style:{"text-align":"center",color:"rgba(128,128,128,0.50)"}},"SSH 密码将自动生成",-1),oe={slot:"append"},ae={slot:"footer",class:"dialog-footer"};function te(e,o,m,P,w,h){const i=g("el-button"),N=g("el-dropdown-item"),O=g("el-dropdown-menu"),_=g("el-dropdown"),C=g("el-popconfirm"),b=g("el-table-column"),T=g("el-table"),v=g("el-pagination"),G=g("el-divider"),F=g("el-option"),y=g("el-select"),d=g("el-form-item"),V=g("el-col"),u=g("el-input"),B=g("el-form"),H=g("el-row"),c=g("el-dialog"),E=g("el-tag"),U=J("loading");return p(),$("div",null,[l(_,{style:{"margin-right":"10px"},onCommand:o[0]||(o[0]=t=>{switch(t){case"remote-gamebox":e.newGameBoxDialogVisible=!0;return;case"from-docker":e.dockerImageVisible=!0;return}})},{dropdown:a(()=>[l(O,null,{default:a(()=>[l(N,{command:"remote-gamebox"},{default:a(()=>[r(n(e.$t("gamebox.publish_out")),1)]),_:1})]),_:1})]),default:a(()=>[l(i,{type:"primary"},{default:a(()=>[r(n(e.$t("gamebox.publish")),1),K]),_:1})]),_:1}),l(i,{onClick:h.testAllSSH,loading:e.sshTesting},{default:a(()=>[r(n(e.$t("gamebox.test_ssh")),1)]),_:1},8,["onClick","loading"]),l(i,{onClick:h.refreshFlag},{default:a(()=>[r(n(e.$t("gamebox.refresh_flag")),1)]),_:1},8,["onClick"]),l(C,{"confirm-button-text":e.$t("general.apply"),"cancel-button-text":e.$t("general.cancel"),icon:"el-icon-info","icon-color":"red",title:e.$t("gamebox.reset_confirm"),onOnConfirm:h.resetGameBox},{default:a(()=>[l(i,{slot:"reference",type:"danger",style:{"margin-left":"10px"}},{default:a(()=>[r(n(e.$t("gamebox.reset")),1)]),_:1})]),_:1},8,["confirm-button-text","cancel-button-text","title","onOnConfirm"]),x((p(),k(T,{data:e.gameBoxList,style:{width:"100%"},stripe:""},{default:a(()=>[l(b,{width:"80",prop:"ID",label:"ID"}),l(b,{prop:"ChallengeTitle",label:e.$t("gamebox.challenge")},null,8,["label"]),l(b,{prop:"TeamName",label:e.$t("gamebox.team")},null,8,["label"]),l(b,{prop:"IP",label:e.$t("gamebox.ip")},null,8,["label"]),l(b,{prop:"Port",label:e.$t("gamebox.port")},null,8,["label"]),l(b,{prop:"Score",label:e.$t("gamebox.score"),formatter:t=>e.utils.FormatFloat(t.Score)},null,8,["label","formatter"]),l(b,{prop:"Description",label:e.$t("gamebox.description")},null,8,["label"]),l(b,{prop:"IsDown",label:e.$t("gamebox.down")},{default:a(t=>[r(n(t.row.IsDown),1)]),_:1},8,["label"]),l(b,{prop:"IsAttacked",label:e.$t("gamebox.attacked")},{default:a(t=>[r(n(t.row.IsAttacked),1)]),_:1},8,["label"]),l(b,{label:e.$t("general.create_at"),width:"200",formatter:t=>e.utils.FormatGoTime(t.CreatedAt)},null,8,["label","formatter"]),l(b,{label:e.$t("general.operate"),width:"300"},{default:a(t=>[l(i,{size:"mini",onClick:()=>{e.editGameBoxForm=JSON.parse(JSON.stringify(t.row)),e.editGameBoxDialogVisible=!0}},{default:a(()=>[r(n(e.$t("general.edit")),1)]),_:2},1032,["onClick"]),l(C,{confirmButtonText:e.$t("general.confirm_cancel"),cancelButtonText:e.$t("general.cancel"),icon:"el-icon-info",iconColor:"red",title:e.$t("gamebox.delete_title"),onOnConfirm:S=>h.handleDelete(t.row)},{reference:a(()=>[l(i,{size:"mini",type:"danger"},{default:a(()=>[r(n(e.$t("general.delete")),1)]),_:1}),l(i,{size:"mini",type:"danger"},{default:a(()=>[r(n(e.$t("general.delete")),1)]),_:1}),l(i,{size:"mini",type:"danger"},{default:a(()=>[r(n(e.$t("general.delete")),1)]),_:1}),l(i,{size:"mini",type:"danger"},{default:a(()=>[r(n(e.$t("general.delete")),1)]),_:1}),l(i,{size:"mini",type:"danger"},{default:a(()=>[r(n(e.$t("general.delete")),1)]),_:1}),l(i,{size:"mini",type:"danger"},{default:a(()=>[r(n(e.$t("general.delete")),1)]),_:1}),l(i,{size:"mini",type:"danger"},{default:a(()=>[r(n(e.$t("general.delete")),1)]),_:1}),l(i,{size:"mini",type:"danger"},{default:a(()=>[r(n(e.$t("general.delete")),1)]),_:1})]),_:2},1032,["confirmButtonText","cancelButtonText","title","onOnConfirm"])]),_:1},8,["label"])]),_:1},8,["data"])),[[U,e.gameBoxList===null]]),R,l(v,{style:{"text-align":"center"},background:"",layout:"prev, pager, next",total:e.total,"page-size":e.per,onCurrentChange:o[1]||(o[1]=t=>{e.page=t,h.getGameBoxes()})},null,8,["total","page-size"]),l(c,{title:e.$t("gamebox.publish"),modelValue:e.newGameBoxDialogVisible,"onUpdate:modelValue":o[4]||(o[4]=t=>e.newGameBoxDialogVisible=t)},{default:a(()=>[l(i,{type:"primary",onClick:o[2]||(o[2]=t=>e.mutliGameBoxDialogVisible=!0)},{default:a(()=>[r(n(e.$t("gamebox.multi")),1)]),_:1}),l(i,{onClick:o[3]||(o[3]=t=>e.newGameBoxForm.push({ChallengeID:null,TeamID:null,IP:"",Port:"",SSHPort:"",SSHUser:"root",SSHPassword:"",Description:""}))},{default:a(()=>[r(n(e.$t("gamebox.add")),1)]),_:1}),l(G),(p(!0),$(I,null,D(e.newGameBoxForm,(t,S)=>(p(),$("div",{key:S},[l(H,{gutter:20},{default:a(()=>[l(B,{model:t,"label-width":"130px"},{default:a(()=>[l(i,{type:"danger",icon:"el-icon-delete",circle:"",onClick:s=>e.newGameBoxForm.splice(S,1)},null,8,["onClick"]),l(V,{span:10},{default:a(()=>[l(d,{label:e.$t("gamebox.challenge")},{default:a(()=>[l(y,{modelValue:t.ChallengeID,"onUpdate:modelValue":s=>t.ChallengeID=s,placeholder:e.$t("gamebox.challenge_placeholder")},{default:a(()=>[(p(!0),$(I,null,D(e.challenges,s=>(p(),k(F,{key:s.ID,label:s.Title,value:s.ID},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label"])]),_:2},1024),l(V,{span:10},{default:a(()=>[l(d,{label:e.$t("gamebox.team")},{default:a(()=>[l(y,{modelValue:t.TeamID,"onUpdate:modelValue":s=>t.TeamID=s,placeholder:e.$t("gamebox.team_placeholder")},{default:a(()=>[(p(!0),$(I,null,D(e.teams,s=>(p(),k(F,{key:s.ID,label:s.Name,value:s.ID},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label"])]),_:2},1024),l(V,{span:10},{default:a(()=>[l(d,{label:e.$t("gamebox.ip")},{default:a(()=>[l(u,{modelValue:t.IP,"onUpdate:modelValue":s=>t.IP=s,placeholder:e.$t("gamebox.ip_placeholder")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label"])]),_:2},1024),l(V,{span:10},{default:a(()=>[l(d,{label:e.$t("gamebox.port")},{default:a(()=>[l(u,{modelValue:t.Port,"onUpdate:modelValue":s=>t.Port=s,placeholder:e.$t("gamebox.port_placeholder")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label"])]),_:2},1024),l(V,{span:20},{default:a(()=>[l(d,{label:e.$t("gamebox.description")},{default:a(()=>[l(u,{type:"textarea",rows:3,placeholder:e.$t("gamebox.description_placeholder"),modelValue:t.Description,"onUpdate:modelValue":s=>t.Description=s},null,8,["placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["label"])]),_:2},1024),l(V,{span:7},{default:a(()=>[l(d,{label:e.$t("gamebox.ssh_port")},{default:a(()=>[l(u,{modelValue:t.SSHPort,"onUpdate:modelValue":s=>t.SSHPort=s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"])]),_:2},1024),l(V,{span:7},{default:a(()=>[l(d,{label:e.$t("gamebox.ssh_user")},{default:a(()=>[l(u,{modelValue:t.SSHUser,"onUpdate:modelValue":s=>t.SSHUser=s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"])]),_:2},1024),l(V,{span:9},{default:a(()=>[l(d,{label:e.$t("gamebox.ssh_password")},{default:a(()=>[l(u,{modelValue:t.SSHPassword,"onUpdate:modelValue":s=>t.SSHPassword=s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"])]),_:2},1024),l(V,null,{default:a(()=>[l(G)]),_:1})]),_:2},1032,["model"])]),_:2},1024)]))),128)),l(i,{type:"primary",onClick:h.onNewGameBox},{default:a(()=>[r(n(e.$t("gamebox.publish")),1)]),_:1},8,["onClick"])]),_:1},8,["title","modelValue"]),l(c,{title:e.$t("gamebox.multi"),modelValue:e.mutliGameBoxDialogVisible,"onUpdate:modelValue":o[7]||(o[7]=t=>e.mutliGameBoxDialogVisible=t)},{default:a(()=>[f("span",null,[r(n(e.$t("gamebox.format"))+" ",1),M]),l(B,null,{default:a(()=>[l(d,{label:e.$t("gamebox.json_string")},{default:a(()=>[l(u,{type:"textarea",modelValue:e.mutliGameBoxJSON,"onUpdate:modelValue":o[5]||(o[5]=t=>e.mutliGameBoxJSON=t)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),f("div",q,[l(i,{onClick:o[6]||(o[6]=t=>e.mutliGameBoxDialogVisible=!1)},{default:a(()=>[r(n(e.$t("general.cancel")),1)]),_:1}),l(i,{type:"primary",onClick:h.mutliGameBox},{default:a(()=>[r(n(e.$t("general.apply")),1)]),_:1},8,["onClick"])])]),_:1},8,["title","modelValue"]),l(c,{title:e.$t("gamebox.edit"),modelValue:e.editGameBoxDialogVisible,"onUpdate:modelValue":o[15]||(o[15]=t=>e.editGameBoxDialogVisible=t)},{default:a(()=>[l(B,{"label-width":"120px"},{default:a(()=>[l(d,{label:e.$t("gamebox.challenge")},{default:a(()=>[r(n(e.editGameBoxForm.ChallengeTitle),1)]),_:1},8,["label"]),l(d,{label:e.$t("gamebox.team")},{default:a(()=>[r(n(e.editGameBoxForm.TeamName),1)]),_:1},8,["label"]),l(d,{label:e.$t("gamebox.ip")},{default:a(()=>[l(u,{modelValue:e.editGameBoxForm.IP,"onUpdate:modelValue":o[8]||(o[8]=t=>e.editGameBoxForm.IP=t),placeholder:e.$t("gamebox.ip_placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(d,{label:e.$t("gamebox.port")},{default:a(()=>[l(u,{modelValue:e.editGameBoxForm.Port,"onUpdate:modelValue":o[9]||(o[9]=t=>e.editGameBoxForm.Port=t),placeholder:e.$t("gamebox.port_placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(d,{label:e.$t("gamebox.description")},{default:a(()=>[l(u,{type:"textarea",rows:3,placeholder:e.$t("gamebox.description_placeholder"),modelValue:e.editGameBoxForm.Description,"onUpdate:modelValue":o[10]||(o[10]=t=>e.editGameBoxForm.Description=t)},null,8,["placeholder","modelValue"])]),_:1},8,["label"]),l(d,{label:e.$t("gamebox.ssh_port")},{default:a(()=>[l(u,{modelValue:e.editGameBoxForm.SSHPort,"onUpdate:modelValue":o[11]||(o[11]=t=>e.editGameBoxForm.SSHPort=t)},null,8,["modelValue"])]),_:1},8,["label"]),l(d,{label:e.$t("gamebox.ssh_user")},{default:a(()=>[l(u,{modelValue:e.editGameBoxForm.SSHUser,"onUpdate:modelValue":o[12]||(o[12]=t=>e.editGameBoxForm.SSHUser=t)},null,8,["modelValue"])]),_:1},8,["label"]),l(d,{label:e.$t("gamebox.ssh_password")},{default:a(()=>[l(u,{modelValue:e.editGameBoxForm.SSHPassword,"onUpdate:modelValue":o[13]||(o[13]=t=>e.editGameBoxForm.SSHPassword=t)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),l(i,{type:"primary",onClick:h.onEditGameBox},{default:a(()=>[r(n(e.$t("gamebox.edit")),1)]),_:1},8,["onClick"]),l(i,{onClick:o[14]||(o[14]=t=>h.testGameBoxSSH(e.editGameBoxForm.IP,e.editGameBoxForm.SSHPort,e.editGameBoxForm.SSHUser,e.editGameBoxForm.SSHPassword))},{default:a(()=>[r(n(e.$t("gamebox.test_ssh")),1)]),_:1})]),_:1},8,["title","modelValue"]),l(c,{title:e.$t("gamebox.test_ssh_fail"),modelValue:e.sshFailDialogVisible,"onUpdate:modelValue":o[17]||(o[17]=t=>e.sshFailDialogVisible=t)},{default:a(()=>[f("div",{innerHTML:e.sshFailContent},null,8,Q),f("div",W,[l(i,{onClick:o[16]||(o[16]=t=>e.sshFailDialogVisible=!1)},{default:a(()=>[r(n(e.$t("general.apply")),1)]),_:1})])]),_:1},8,["title","modelValue"]),l(c,{title:"从镜像部署题目",modelValue:e.dockerImageVisible,"onUpdate:modelValue":o[29]||(o[29]=t=>e.dockerImageVisible=t),width:"70%"},{default:a(()=>[x((p(),k(B,null,{default:a(()=>[l(u,{placeholder:"your_name/web_challenge:latest",modelValue:e.dockerImageText,"onUpdate:modelValue":o[18]||(o[18]=t=>e.dockerImageText=t)},{default:a(()=>[X,l(i,{slot:"append",icon:"el-icon-search",onClick:h.getImageData},{default:a(()=>[r("获取镜像信息")]),_:1},8,["onClick"])]),_:1},8,["modelValue"])]),_:1})),[[U,e.loadingDockerfile]]),Y,e.dockerInfo!=null?(p(),$("div",Z,[l(H,{gutter:24},{default:a(()=>[l(V,{span:12},{default:a(()=>[l(B,{inline:!0,"label-width":"120px"},{default:a(()=>[l(d,{label:e.$t("gamebox.challenge_placeholder")},{default:a(()=>[l(y,{modelValue:e.dockerForm.Challenge,"onUpdate:modelValue":o[19]||(o[19]=t=>e.dockerForm.Challenge=t),placeholder:e.$t("gamebox.challenge_placeholder")},{default:a(()=>[(p(!0),$(I,null,D(e.challenges,t=>(p(),k(F,{key:t.ID,label:t.Title,value:t.ID},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),l(d,{label:"题目 IP"},{default:a(()=>[l(u,{placeholder:"题目 IP",modelValue:e.dockerForm.IP,"onUpdate:modelValue":o[20]||(o[20]=t=>e.dockerForm.IP=t)},null,8,["modelValue"])]),_:1}),l(d,{label:"容器端口"},{default:a(()=>[l(u,{placeholder:"容器端口",modelValue:e.dockerForm.ServicePort,"onUpdate:modelValue":o[21]||(o[21]=t=>e.dockerForm.ServicePort=t)},null,8,["modelValue"])]),_:1}),l(d,{label:"容器 SSH 端口"},{default:a(()=>[l(u,{placeholder:"容器 SSH 端口",modelValue:e.dockerForm.SSHPort,"onUpdate:modelValue":o[22]||(o[22]=t=>e.dockerForm.SSHPort=t)},null,8,["modelValue"])]),_:1}),ee,le]),_:1})]),_:1}),l(V,{span:12},{default:a(()=>[l(B,{inline:!0,"label-width":"120px"},{default:a(()=>[l(d,{label:"root SSH 用户名"},{default:a(()=>[l(u,{placeholder:"root SSH 用户名",modelValue:e.dockerForm.RootSSHName,"onUpdate:modelValue":o[23]||(o[23]=t=>e.dockerForm.RootSSHName=t)},null,8,["modelValue"])]),_:1}),l(d,{label:"选手 SSH 用户名"},{default:a(()=>[l(u,{placeholder:"选手 SSH 用户名",modelValue:e.dockerForm.UserSSHName,"onUpdate:modelValue":o[24]||(o[24]=t=>e.dockerForm.UserSSHName=t)},null,8,["modelValue"])]),_:1})]),_:1}),r(" 题目描述 "),l(u,{rows:5,type:"textarea",placeholder:"请输入内容",modelValue:e.dockerForm.Description,"onUpdate:modelValue":o[25]||(o[25]=t=>e.dockerForm.Description=t)},null,8,["modelValue"])]),_:1})]),_:1}),l(G,{"content-position":"left"},{default:a(()=>[r("端口映射")]),_:1}),l(B,{inline:!0,"label-width":"30px"},{default:a(()=>[(p(!0),$(I,null,D(e.dockerForm.Ports,(t,S)=>(p(),k(d,{key:S,style:{"margin-bottom":"0px"}},{default:a(()=>[l(u,{style:{width:"180px"},placeholder:"映射端口",modelValue:t.Out,"onUpdate:modelValue":s=>t.Out=s,size:"mini",min:1,max:65535},{default:a(()=>[f("template",oe,[r(" -> "+n(t.In)+" ",1),l(i,{icon:"el-icon-error",onClick:s=>e.dockerForm.Ports.splice(S,1)},null,8,["onClick"])])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024))),128))]),_:1}),l(B,{inline:!0,"label-width":"30px"},{default:a(()=>[l(d,null,{default:a(()=>[e.inputPortVisible?(p(),k(u,{key:0,modelValue:e.inputPortValue,"onUpdate:modelValue":o[26]||(o[26]=t=>e.inputPortValue=t),ref:"portInput",size:"mini",onKeyup:L(h.inputPortConfirm,["enter","native"]),onBlur:h.inputPortConfirm,minlength:"1",maxlength:"5",label:"容器内端口"},null,8,["modelValue","onKeyup","onBlur"])):(p(),k(i,{key:1,size:"mini",onClick:o[27]||(o[27]=()=>{e.inputPortVisible=!0,this.$nextTick(t=>{this.$refs.portInput.$refs.input.focus()})})},{default:a(()=>[r("+ 添加端口 ")]),_:1}))]),_:1})]),_:1}),l(T,{size:"mini",data:e.teams,stripe:"","max-height":"300",style:{width:"100%"}},{default:a(()=>[l(b,{prop:"Name",label:"队伍名",width:"180"}),l(b,{label:"端口配置"},{default:a(t=>[(p(!0),$(I,null,D(e.dockerForm.Ports,(S,s)=>(p(),k(E,{size:"mini",key:s,effect:"plain",style:{"margin-right":"10px"}},{default:a(()=>[r(n(Number(S.Out)+t.$index)+" -> "+n(S.In),1)]),_:2},1024))),128))]),_:1}),l(b,{label:"容器名"},{default:a(t=>[r(n(e.dockerInfo.Name)+"_"+n(t.row.Name),1)]),_:1})]),_:1},8,["data"])])):A("",!0),f("div",ae,[l(i,{onClick:o[28]||(o[28]=t=>e.dockerImageVisible=!1)},{default:a(()=>[r("取 消")]),_:1}),l(i,{type:"primary",onClick:h.deployFromDocker},{default:a(()=>[r("添加")]),_:1},8,["onClick"])])]),_:1},8,["modelValue"])])}const ne=z(j,[["render",te]]);export{ne as default};
