import{_,c as M,a as t,w as r,r as l,o as g,b as o,t as i,h,i as w}from"./index-zzYLg-eD.js";const C={name:"Manager",data:()=>({token:localStorage.getItem("managerToken"),newManagerDialogVisible:!1,managerList:null,newManagerForm:{Name:"",Password:"",IsCheck:!1}}),mounted(){this.getManager()},methods:{getManager(){this.utils.GET("/manager/managers").then(e=>{this.managerList=e}).catch(e=>this.$message.error(e))},onNewManager(){this.utils.POST("/manager/manager",this.newManagerForm).then(e=>{this.newManagerDialogVisible=!1,this.newManagerForm={Name:"",Password:"",IsCheck:!1},this.$message.success(e),this.getManager()}).catch(e=>this.$message.error(e))},editPassword(e){this.$confirm(this.$i18n.t("manager.change_password_confirm"),this.$i18n.t("manager.confirm"),{confirmButtonText:this.$i18n.t("general.apply"),cancelButtonText:this.$i18n.t("general.cancel"),type:"warning"}).then(()=>{this.utils.GET("/manager/manager/changePassword?id="+e).then(a=>{this.$alert(a,this.$i18n.t("manager.new_password"),{confirmButtonText:this.$i18n.t("manager.save_confirm")})}).catch(a=>this.$message.error(a))}).catch(()=>{})},deleteManager(e){this.$confirm(this.$i18n.t("manager.delete_account_confirm"),this.$i18n.t("manager.confirm"),{confirmButtonText:this.$i18n.t("general.apply"),cancelButtonText:this.$i18n.t("general.cancel"),type:"warning"}).then(()=>{this.utils.DELETE("/manager/manager?id="+e).then(a=>{this.getManager(),this.$message.success(a)}).catch(a=>this.$message.error(a))}).catch(()=>{})},refreshToken(e){this.$confirm(this.$i18n.t("manager.refresh_token_confirm"),this.$i18n.t("manager.confirm"),{confirmButtonText:this.$i18n.t("general.apply"),cancelButtonText:this.$i18n.t("general.cancel"),type:"warning"}).then(()=>{this.utils.GET("/manager/manager/token?id="+e).then(a=>{this.getManager(),this.$alert(a,this.$i18n.t("manager.new_token"),{confirmButtonText:this.$i18n.t("manager.save_confirm")})}).catch(a=>this.$message.error(a))}).catch(()=>{})}}};function V(e,a,T,y,I,d){const s=l("el-button"),m=l("el-table-column"),p=l("el-table"),$=l("el-checkbox"),c=l("el-form-item"),u=l("el-input"),k=l("el-form"),b=l("el-dialog");return g(),M("div",null,[t(s,{type:"primary",onClick:a[0]||(a[0]=n=>e.newManagerDialogVisible=!0)},{default:r(()=>[o(i(e.$t("manager.add")),1)]),_:1}),t(p,{data:e.managerList,style:{width:"100%"},stripe:""},{default:r(()=>[t(m,{width:"80",prop:"ID",label:"ID"}),t(m,{prop:"Name",label:e.$t("manager.account")},null,8,["label"]),t(m,{prop:"IsCheck",label:e.$t("manager.is_check")},{default:r(n=>[o(i(n.row.IsCheck),1)]),_:1},8,["label"]),t(m,{prop:"Token",label:e.$t("manager.token")},null,8,["label"]),t(m,{label:e.$t("general.operate"),width:"300"},{default:r(n=>[n.row.Token!==e.token?(g(),h(s,{key:0,size:"mini",onClick:f=>d.refreshToken(n.row.ID)},{default:r(()=>[o(i(e.$t("manager.refresh_token")),1)]),_:2},1032,["onClick"])):(g(),h(s,{key:1,size:"mini",disabled:""},{default:r(()=>[o(i(e.$t("manager.refresh_token")),1)]),_:1})),n.row.IsCheck?w("",!0):(g(),h(s,{key:2,size:"mini",type:"warning",onClick:f=>d.editPassword(n.row.ID)},{default:r(()=>[o(i(e.$t("manager.change_password")),1)]),_:2},1032,["onClick"])),t(s,{size:"mini",type:"danger",onClick:f=>d.deleteManager(n.row.ID)},{default:r(()=>[o(i(e.$t("manager.delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"]),t(b,{title:e.$t("manager.add"),modelValue:e.newManagerDialogVisible,"onUpdate:modelValue":a[4]||(a[4]=n=>e.newManagerDialogVisible=n)},{default:r(()=>[t(k,{model:e.newManagerForm,"label-width":"120px"},{default:r(()=>[t(c,null,{default:r(()=>[t($,{modelValue:e.newManagerForm.IsCheck,"onUpdate:modelValue":a[1]||(a[1]=n=>e.newManagerForm.IsCheck=n)},{default:r(()=>[o(i(e.$t("manager.is_check")),1)]),_:1},8,["modelValue"])]),_:1}),t(c,{label:e.$t("manager.account")},{default:r(()=>[t(u,{modelValue:e.newManagerForm.Name,"onUpdate:modelValue":a[2]||(a[2]=n=>e.newManagerForm.Name=n)},null,8,["modelValue"])]),_:1},8,["label"]),e.newManagerForm.IsCheck?w("",!0):(g(),h(c,{key:0,label:e.$t("manager.password")},{default:r(()=>[t(u,{modelValue:e.newManagerForm.Password,"onUpdate:modelValue":a[3]||(a[3]=n=>e.newManagerForm.Password=n)},null,8,["modelValue"])]),_:1},8,["label"]))]),_:1},8,["model"]),t(s,{type:"primary",onClick:d.onNewManager},{default:r(()=>[o(i(e.$t("manager.add")),1)]),_:1},8,["onClick"])]),_:1},8,["title","modelValue"])])}const B=_(C,[["render",V]]);export{B as default};
