import{k as w,l as G,u as s,E as g,c as L,a as t,w as l,m as h,q as n,e as S,t as d,r,o as A,b as p,F as M,j as q,s as E,v as y}from"./index-w83zdtlJ.js";const H={slot:"tip",class:"el-upload__tip"},Q={slot:"tip",class:"el-upload__tip"},Y={__name:"Team",setup(W){let T=w({}),c=w(!1),u=w(!1),D=localStorage.getItem("managerToken"),_=w([{Name:"",Logo:""}]),m=w({Name:"",Logo:""});G(()=>{console.log("the component is now mounted."),v()}),T.value=[{ID:1,CreatedAt:"2024-01-31T00:01:41+08:00",UpdatedAt:"2024-01-31T00:01:41+08:00",DeletedAt:null,Name:"aaa",Logo:"462d4e0dc773dc9d.png",Score:0,SecretKey:"a3e5c9a08745f9f7"},{ID:2,CreatedAt:"2024-01-31T00:02:21+08:00",UpdatedAt:"2024-01-31T00:02:21+08:00",DeletedAt:null,Name:"bbb",Logo:"3732f504d96dcfa2.png",Score:0,SecretKey:"2305fc73c36f4ea2"},{ID:3,CreatedAt:"2024-01-31T00:03:28+08:00",UpdatedAt:"2024-01-31T00:03:28+08:00",DeletedAt:null,Name:"ddd",Logo:"e60969c4a99ec443.png",Score:0,SecretKey:"4e87e8dbb74206f2"},{ID:4,CreatedAt:"2024-01-31T00:47:07+08:00",UpdatedAt:"2024-01-31T00:47:07+08:00",DeletedAt:null,Name:"eeee",Logo:"https://image.16pic.com/00/53/26/16pic_5326745_s.jpg.png",Score:0,SecretKey:"2997bf7f05ab7e6e"},{ID:5,CreatedAt:"2024-01-31T00:50:38+08:00",UpdatedAt:"2024-01-31T00:50:38+08:00",DeletedAt:null,Name:"sss",Logo:"https://image.16pic.com/00/53/26/16pic_5326745_s.jpg",Score:0,SecretKey:"aa0e68fec0848d90"},{ID:6,CreatedAt:"2024-01-31T00:51:55+08:00",UpdatedAt:"2024-01-31T00:51:55+08:00",DeletedAt:null,Name:"zzz",Logo:"https://image.16pic.com/00/53/26/16pic_5326745_s.jpg",Score:0,SecretKey:"1a617a31d370d913"}];const v=()=>{s.GET("/manager/teams").then(e=>{console.log("getTeams func worked! "),T.value=e}).catch(e=>{g({type:"error",message:e})})},F=()=>{s.POST("/manager/teams",_.value).then(e=>{c.value=!1,v(),_.value=[{Name:"",Logo:""}],e.forEach(o=>{E({title:o.Name,message:y("p",null,[y("span",null,"the passwd is"),y("i",{style:"color: teal"},o.Password)])})})}).catch(e=>{g({type:"error",message:e})})},P=()=>{s.PUT("/manager/team",m.value).then(e=>{u.value=!1,v(),g({type:"success",message:e})}).catch(e=>g({type:"error",message:e}))},K=e=>{s.POST("/manager/team/resetPassword",{ID:e}).then(o=>{u.value=!1,E({title:"New Passwd",message:y("p",null,[y("span",null,"The passwd is:"),y("i",{style:"color: teal"},o)])})}).catch(o=>g({type:"error",message:o}))},O=e=>{s.DELETE("/manager/team?id="+e.ID).then(o=>{g({message:o,type:"success"}),v()}).catch(o=>{g({type:"error",message:o})})};return(e,o)=>{const i=r("el-button"),f=r("el-table-column"),R=r("el-image"),C=r("el-popconfirm"),j=r("el-table"),B=r("el-divider"),N=r("el-input"),$=r("el-form-item"),U=r("el-col"),k=r("el-upload"),I=r("el-form"),J=r("el-row"),z=r("el-dialog");return A(),L("div",null,[t(i,{type:"primary",onClick:o[0]||(o[0]=a=>h(c)?c.value=!0:c=!0)},{default:l(()=>[p(d(e.$t("team.add")),1)]),_:1}),t(j,{data:n(T),style:{width:"100%"}},{default:l(()=>[t(f,{prop:"ID",label:"ID",width:"100"}),t(f,{prop:"Logo",label:e.$t("team.logo"),width:"180"},{default:l(a=>[t(R,{style:{width:"50px",height:"50px"},src:n(s).baseURL+"/uploads/"+a.row.Logo,fit:"fill"},null,8,["src"])]),_:1},8,["label"]),t(f,{prop:"Name",label:e.$t("team.team_name")},null,8,["label"]),t(f,{prop:"Score",label:e.$t("team.score"),formatter:a=>n(s).FormatFloat(a.Score)},null,8,["label","formatter"]),t(f,{width:"300",prop:"SecretKey",label:"Token"}),t(f,{label:e.$t("general.create_at"),width:"180",formatter:a=>n(s).FormatGoTime(a.CreatedAt)},null,8,["label","formatter"]),t(f,{label:e.$t("general.update_at"),width:"180",formatter:a=>n(s).FormatGoTime(a.UpdatedAt)},null,8,["label","formatter"]),t(f,{label:e.$t("general.operate"),width:"200"},{default:l(a=>[t(i,{size:"mini",onClick:()=>{h(m)?m.value=JSON.parse(JSON.stringify(a.row)):m=JSON.parse(JSON.stringify(a.row)),h(u)?u.value=!0:u=!0}},{default:l(()=>[p(d(e.$t("general.edit")),1)]),_:2},1032,["onClick"]),t(C,{"confirm-button-text":e.$t("general.confirm_cancel"),"cancel-button-text":e.$t("general.cancel"),icon:e.InfoFilled,"icon-color":"red",title:e.$t("team.delete_confirm"),onConfirm:V=>O(a.row)},{reference:l(()=>[t(i,{type:"danger"},{default:l(()=>[p(d(e.$t("general.delete")),1)]),_:1})]),_:2},1032,["confirm-button-text","cancel-button-text","icon","title","onConfirm"])]),_:1},8,["label"])]),_:1},8,["data"]),S("div",null,d(n(T)),1),t(z,{title:e.$t("team.add"),modelValue:n(c),"onUpdate:modelValue":o[2]||(o[2]=a=>h(c)?c.value=a:c=a)},{default:l(()=>[t(i,{onClick:o[1]||(o[1]=a=>n(_).push({Name:"",Logo:""}))},{default:l(()=>[p(d(e.$t("team.new")),1)]),_:1}),t(B),(A(!0),L(M,null,q(n(_),(a,V)=>(A(),L("div",{key:V},[t(J,{gutter:20},{default:l(()=>[t(I,{model:a,"label-width":"80px"},{default:l(()=>[t(i,{type:"danger",icon:"el-icon-delete",circle:"",onClick:b=>n(_).splice(V,1)},null,8,["onClick"]),t(U,{span:10},{default:l(()=>[t($,{label:e.$t("team.team_name")},{default:l(()=>[t(N,{modelValue:a.Name,"onUpdate:modelValue":b=>a.Name=b},null,8,["modelValue","onUpdate:modelValue"]),t(N,{modelValue:a.Logo,"onUpdate:modelValue":b=>a.Logo=b,size:"mini",placeholder:e.$t("team.picture_url")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label"])]),_:2},1024),t(U,{span:10},{default:l(()=>[t($,{label:e.$t("team.team_logo")},{default:l(()=>[t(k,{name:"picture",action:n(s).baseURL+"/manager/uploadPicture",headers:{Authorization:n(D)},"on-success":b=>{n(_)[V].Logo=b.data}},{default:l(()=>[t(i,{size:"small",type:"primary"},{default:l(()=>[p(d(e.$t("team.upload")),1)]),_:1}),S("div",H,d(e.$t("team.file_limit")),1)]),_:2},1032,["action","headers","on-success"])]),_:2},1032,["label"])]),_:2},1024)]),_:2},1032,["model"])]),_:2},1024)]))),128)),t(i,{type:"primary",onClick:F},{default:l(()=>[p(d(e.$t("team.add")),1)]),_:1})]),_:1},8,["title","modelValue"]),t(z,{title:e.$t("team.edit"),modelValue:n(u),"onUpdate:modelValue":o[6]||(o[6]=a=>h(u)?u.value=a:u=a)},{default:l(()=>[t(I,{"label-width":"80px"},{default:l(()=>[t($,{label:e.$t("team.team_name")},{default:l(()=>[t(N,{modelValue:n(m).Name,"onUpdate:modelValue":o[3]||(o[3]=a=>n(m).Name=a)},null,8,["modelValue"]),t(N,{modelValue:n(m).Logo,"onUpdate:modelValue":o[4]||(o[4]=a=>n(m).Logo=a),size:"mini",placeholder:e.$t("team.picture_url")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t($,{label:e.$t("team.team_logo")},{default:l(()=>[t(k,{name:"picture",action:n(s).baseURL+"/manager/uploadPicture",headers:{Authorization:n(D)},"on-success":a=>{n(m).Logo=a.data}},{default:l(()=>[t(i,{size:"small",type:"primary"},{default:l(()=>[p(d(e.$t("team.upload")),1)]),_:1}),S("div",Q,d(e.$t("team.file_limit")),1)]),_:1},8,["action","headers","on-success"])]),_:1},8,["label"]),t($,null,{default:l(()=>[t(i,{type:"primary",onClick:P},{default:l(()=>[p(d(e.$t("team.edit")),1)]),_:1}),t(C,{title:e.$t("team.reset_password_confirm"),"confirm-button-text":e.$t("general.apply"),"cancel-button-text":e.$t("general.cancel"),onConfirm:o[5]||(o[5]=a=>K(n(m).ID))},{reference:l(()=>[t(i,null,{default:l(()=>[p(d(e.$t("team.reset_password")),1)]),_:1})]),_:1},8,["title","confirm-button-text","cancel-button-text"])]),_:1})]),_:1})]),_:1},8,["title","modelValue"])])}}};export{Y as default};
