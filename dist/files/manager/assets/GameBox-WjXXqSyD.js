import{_ as J,f as z,c as V,a as l,w as a,g as x,h as c,e as h,r as p,o as g,b as s,t as m,F as B,j as I,k as L,i as A}from"./index-V9p_PmUk.js";const j={name:"GameBox",data:()=>({newGameBoxDialogVisible:!1,editGameBoxDialogVisible:!1,mutliGameBoxDialogVisible:!1,sshFailDialogVisible:!1,sshTesting:!1,gameBoxList:null,teams:[],challenges:[],newGameBoxForm:[],editGameBoxForm:{ChallengeTitle:"",TeamName:"",IP:"",Port:"",SSHPort:"",SSHUser:"",SSHPassword:"",Description:""},loadingDockerfile:!1,dockerImageVisible:!1,inputPortVisible:!1,inputPortValue:"",dockerImageText:"wuhan005/awd_web:latest",dockerImageForm:{User:"",Image:"",Tag:""},dockerInfo:null,dockerForm:{Image:"",Challenge:null,IP:"",ServicePort:"",SSHPort:"",RootSSHName:"",UserSSHName:"",Description:`SSH 端口：{{ssh_port}}
SSH 账号：{{ssh_name}}
SSH 密码：{{ssh_password}}`,Ports:[]},mutliGameBoxJSON:"",sshFailContent:"",page:1,per:10,total:0}),async mounted(){await this.getTeams(),await this.getChallenges(),await this.getGameBoxes()},methods:{getGameBoxes(){return new Promise(e=>{this.utils.GET(`/manager/gameboxes?page=${this.page}&per=${this.per}`).then(o=>{let n=o.Data;n.forEach((D,P)=>{n[P].ChallengeTitle=this.getChallengeByID(D.ChallengeID).Title,n[P].TeamName=this.getTeamByID(D.TeamID).Name}),this.gameBoxList=n,this.total=o.Total,e()}).catch(o=>{this.$message.error(o),e()})})},getTeams(){return new Promise(e=>{this.utils.GET("/manager/teams").then(o=>{this.teams=o,e()}).catch(o=>{this.$message.error(o),e()})})},async getChallenges(){return new Promise(e=>{this.utils.GET("/manager/challenges").then(o=>{this.challenges=o,e()}).catch(o=>{this.$message.error(o),e()})})},mutliGameBox(){let e=JSON.parse(JSON.stringify(this.newGameBoxForm));try{JSON.parse(this.mutliGameBoxJSON).forEach(n=>{this.newGameBoxForm.push({ChallengeID:n.ChallengeID,TeamID:n.TeamID,IP:n.IP,Port:n.Port,SSHPort:n.SSHPort!==void 0?n.SSHPort:"",SSHUser:n.SSHUser!==void 0?n.SSHUser:"",SSHPassword:n.SSHPassword!==void 0?n.SSHPassword:"",Description:n.Description})}),this.mutliGameBoxDialogVisible=!1,this.mutliGameBoxJSON=""}catch{this.$message.error(this.$i18n.t("gamebox.json_parse_error")),this.newGameBoxForm=e}},onNewGameBox(){this.utils.POST("/manager/gameboxes",this.newGameBoxForm).then(e=>{this.newGameBoxDialogVisible=!1,this.getGameBoxes(),this.newGameBoxForm=[],this.$message({message:e,type:"success"})}).catch(e=>this.$message.error(e))},onEditGameBox(){this.utils.PUT("/manager/gamebox",this.editGameBoxForm).then(e=>{this.editGameBoxDialogVisible=!1,this.getGameBoxes(),this.$message.success(e)}).catch(e=>this.$message.error(e))},handleDelete(e){this.utils.DELETE("/manager/gamebox?id="+e.ID).then(o=>{this.$message({message:o,type:"success"}),this.getGameBoxes()}).catch(o=>this.$message({message:o,type:"error"}))},getChallengeByID(e){let o=null;return this.challenges.forEach(n=>{n.ID===e&&(o=n)}),o},getTeamByID(e){let o=null;return this.teams.forEach(n=>{n.ID===e&&(o=n)}),o},getImageData(){this.loadingDockerfile=!0,this.dockerImageForm.User=this.dockerImageText.split("/")[0],this.dockerImageForm.Image=this.dockerImageText.split("/")[1].split(":")[0],this.dockerImageForm.Tag=this.dockerImageText.split(":")[1],this.utils.POST("/manager/docker/findImage",this.dockerImageForm).then(e=>{this.loadingDockerfile=!1;for(let o=0;o<e.Ports.length;o++)this.dockerForm.Ports.push({In:e.Ports[o],Out:1e4+o*1e3});this.dockerForm.Image=e.Image,this.dockerInfo=e}).catch(e=>{this.$message({message:e,type:"error"}),this.loadingDockerfile=!1})},inputPortConfirm(){let e=this.inputPortValue;e&&this.dockerForm.Ports.push({In:e,Out:0}),this.inputPortVisible=!1,this.inputPortValue=""},deployFromDocker(){this.utils.POST("/manager/docker/deploy",this.dockerForm).then(e=>{console.log(e)}).catch(e=>this.$message({message:e,type:"error"}))},testAllSSH(){this.sshTesting=!0,this.utils.GET("/manager/gameboxes/sshTest").then(e=>{if(this.sshTesting=!1,e===null)return this.$message.success(this.$i18n.t("gamebox.test_ssh_success"));this.sshFailContent="",e.forEach(o=>{this.sshFailContent+=`<strong>TeamID：</strong>${o.TeamID}<br><strong>ChallengeID：</strong>${o.ChallengeID}<br><strong>GameBoxID：</strong>${o.GameBoxID}<br><strong>Error：</strong>${o.Error}<hr>`}),this.sshFailDialogVisible=!0})},testGameBoxSSH(e,o,n,D){this.$prompt(this.$t("gamebox.input_shell_command"),"",{confirmButtonText:this.$t("general.apply"),cancelButtonText:this.$t("general.cancel")}).then(({value:P})=>{this.utils.POST("/manager/gameboxes/sshTest",{IP:e,Port:o,User:n,Password:D,Command:P}).then(b=>this.$alert(b,this.$t("general.success"))).catch(b=>this.$alert(b,this.$t("general.fail")))}).catch(()=>{})},refreshFlag(){this.utils.GET("/manager/gameboxes/refreshFlag").then(e=>this.$message.success(e)).catch(e=>this.$message.error(e))},resetGameBox(){this.utils.GET("/manager/gameboxes/reset").then(e=>this.$message.success(e)).catch(e=>this.$message.error(e))}}},K=h("i",{class:"el-icon-arrow-down el-icon--right"},null,-1),R={"slot-scope":"scope"},M={"slot-scope":"scope"},q={"slot-scope":"scope"},Q=h("br",null,null,-1),W=h("code",null,'[{ "ChallengeID": 1, "TeamID": 1, "IP": "", "Port": "", "SSHPort": "", "SSHUser": "", "SSHPassword": "", "Description": "" }]',-1),X={slot:"footer",class:"dialog-footer"},Y=["innerHTML"],Z={slot:"footer",class:"dialog-footer"},ee=h("template",{slot:"prepend"},[s("docker pull")],-1),le=h("br",null,null,-1),oe={key:0},ae=h("br",null,null,-1),te=h("div",{style:{"text-align":"center",color:"rgba(128,128,128,0.50)"}},"SSH 密码将自动生成",-1),se={slot:"append"},re={"slot-scope":"scope"},ne={"slot-scope":"scope"},ie={slot:"footer",class:"dialog-footer"};function me(e,o,n,D,P,b){const u=p("el-button"),_=p("el-dropdown-item"),N=p("el-dropdown-menu"),v=p("el-dropdown"),C=p("el-popconfirm"),f=p("el-table-column"),T=p("el-table"),O=p("el-pagination"),F=p("el-divider"),G=p("el-option"),y=p("el-select"),i=p("el-form-item"),S=p("el-col"),d=p("el-input"),$=p("el-form"),H=p("el-row"),w=p("el-dialog"),E=p("el-tag"),U=z("loading");return g(),V("div",null,[l(v,{style:{"margin-right":"10px"},onCommand:o[0]||(o[0]=t=>{switch(t){case"remote-gamebox":e.newGameBoxDialogVisible=!0;return;case"from-docker":e.dockerImageVisible=!0;return}})},{default:a(()=>[l(u,{type:"primary"},{default:a(()=>[s(m(e.$t("gamebox.publish")),1),K]),_:1}),l(N,{slot:"dropdown"},{default:a(()=>[l(_,{command:"remote-gamebox"},{default:a(()=>[s(m(e.$t("gamebox.publish_out")),1)]),_:1})]),_:1})]),_:1}),l(u,{onClick:b.testAllSSH,loading:e.sshTesting},{default:a(()=>[s(m(e.$t("gamebox.test_ssh")),1)]),_:1},8,["onClick","loading"]),l(u,{onClick:b.refreshFlag},{default:a(()=>[s(m(e.$t("gamebox.refresh_flag")),1)]),_:1},8,["onClick"]),l(C,{"confirm-button-text":e.$t("general.apply"),"cancel-button-text":e.$t("general.cancel"),icon:"el-icon-info","icon-color":"red",title:e.$t("gamebox.reset_confirm"),onOnConfirm:b.resetGameBox},{default:a(()=>[l(u,{slot:"reference",type:"danger",style:{"margin-left":"10px"}},{default:a(()=>[s(m(e.$t("gamebox.reset")),1)]),_:1})]),_:1},8,["confirm-button-text","cancel-button-text","title","onOnConfirm"]),x((g(),c(T,{data:e.gameBoxList,style:{width:"100%"},stripe:""},{default:a(()=>[l(f,{width:"80",prop:"ID",label:"ID"}),l(f,{prop:"ChallengeTitle",label:e.$t("gamebox.challenge")},null,8,["label"]),l(f,{prop:"TeamName",label:e.$t("gamebox.team")},null,8,["label"]),l(f,{prop:"IP",label:e.$t("gamebox.ip")},null,8,["label"]),l(f,{prop:"Port",label:e.$t("gamebox.port")},null,8,["label"]),l(f,{prop:"Score",label:e.$t("gamebox.score"),formatter:t=>e.utils.FormatFloat(t.Score)},null,8,["label","formatter"]),l(f,{prop:"Description",label:e.$t("gamebox.description")},null,8,["label"]),l(f,{prop:"IsDown",label:e.$t("gamebox.down")},{default:a(()=>[h("template",R,[s(m(e.scope.row.IsDown),1)])]),_:1},8,["label"]),l(f,{prop:"IsAttacked",label:e.$t("gamebox.attacked")},{default:a(()=>[h("template",M,[s(m(e.scope.row.IsAttacked),1)])]),_:1},8,["label"]),l(f,{label:e.$t("general.create_at"),width:"200",formatter:t=>e.utils.FormatGoTime(t.CreatedAt)},null,8,["label","formatter"]),l(f,{label:e.$t("general.operate"),width:"300"},{default:a(()=>[h("template",q,[l(u,{size:"mini",onClick:o[1]||(o[1]=()=>{e.editGameBoxForm=JSON.parse(JSON.stringify(e.scope.row)),e.editGameBoxDialogVisible=!0})},{default:a(()=>[s(m(e.$t("general.edit")),1)]),_:1}),l(C,{confirmButtonText:e.$t("general.confirm_cancel"),cancelButtonText:e.$t("general.cancel"),icon:"el-icon-info",iconColor:"red",title:e.$t("gamebox.delete_title"),onOnConfirm:o[2]||(o[2]=t=>b.handleDelete(e.scope.row))},{default:a(()=>[l(u,{size:"mini",type:"danger",slot:"reference"},{default:a(()=>[s(m(e.$t("general.delete")),1)]),_:1})]),_:1},8,["confirmButtonText","cancelButtonText","title"])])]),_:1},8,["label"])]),_:1},8,["data"])),[[U,e.gameBoxList===null]]),Q,l(O,{style:{"text-align":"center"},background:"",layout:"prev, pager, next",total:e.total,"page-size":e.per,onCurrentChange:o[3]||(o[3]=t=>{e.page=t,b.getGameBoxes()})},null,8,["total","page-size"]),l(w,{title:e.$t("gamebox.publish"),visible:e.newGameBoxDialogVisible},{default:a(()=>[l(u,{type:"primary",onClick:o[4]||(o[4]=t=>e.mutliGameBoxDialogVisible=!0)},{default:a(()=>[s(m(e.$t("gamebox.multi")),1)]),_:1}),l(u,{onClick:o[5]||(o[5]=t=>e.newGameBoxForm.push({ChallengeID:null,TeamID:null,IP:"",Port:"",SSHPort:"",SSHUser:"root",SSHPassword:"",Description:""}))},{default:a(()=>[s(m(e.$t("gamebox.add")),1)]),_:1}),l(F),(g(!0),V(B,null,I(e.newGameBoxForm,(t,k)=>(g(),V("div",{key:k},[l(H,{gutter:20},{default:a(()=>[l($,{model:t,"label-width":"130px"},{default:a(()=>[l(u,{type:"danger",icon:"el-icon-delete",circle:"",onClick:r=>e.newGameBoxForm.splice(k,1)},null,8,["onClick"]),l(S,{span:10},{default:a(()=>[l(i,{label:e.$t("gamebox.challenge")},{default:a(()=>[l(y,{modelValue:t.ChallengeID,"onUpdate:modelValue":r=>t.ChallengeID=r,placeholder:e.$t("gamebox.challenge_placeholder")},{default:a(()=>[(g(!0),V(B,null,I(e.challenges,r=>(g(),c(G,{key:r.ID,label:r.Title,value:r.ID},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label"])]),_:2},1024),l(S,{span:10},{default:a(()=>[l(i,{label:e.$t("gamebox.team")},{default:a(()=>[l(y,{modelValue:t.TeamID,"onUpdate:modelValue":r=>t.TeamID=r,placeholder:e.$t("gamebox.team_placeholder")},{default:a(()=>[(g(!0),V(B,null,I(e.teams,r=>(g(),c(G,{key:r.ID,label:r.Name,value:r.ID},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label"])]),_:2},1024),l(S,{span:10},{default:a(()=>[l(i,{label:e.$t("gamebox.ip")},{default:a(()=>[l(d,{modelValue:t.IP,"onUpdate:modelValue":r=>t.IP=r,placeholder:e.$t("gamebox.ip_placeholder")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label"])]),_:2},1024),l(S,{span:10},{default:a(()=>[l(i,{label:e.$t("gamebox.port")},{default:a(()=>[l(d,{modelValue:t.Port,"onUpdate:modelValue":r=>t.Port=r,placeholder:e.$t("gamebox.port_placeholder")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label"])]),_:2},1024),l(S,{span:20},{default:a(()=>[l(i,{label:e.$t("gamebox.description")},{default:a(()=>[l(d,{type:"textarea",rows:3,placeholder:e.$t("gamebox.description_placeholder"),modelValue:t.Description,"onUpdate:modelValue":r=>t.Description=r},null,8,["placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["label"])]),_:2},1024),l(S,{span:7},{default:a(()=>[l(i,{label:e.$t("gamebox.ssh_port")},{default:a(()=>[l(d,{modelValue:t.SSHPort,"onUpdate:modelValue":r=>t.SSHPort=r},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"])]),_:2},1024),l(S,{span:7},{default:a(()=>[l(i,{label:e.$t("gamebox.ssh_user")},{default:a(()=>[l(d,{modelValue:t.SSHUser,"onUpdate:modelValue":r=>t.SSHUser=r},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"])]),_:2},1024),l(S,{span:9},{default:a(()=>[l(i,{label:e.$t("gamebox.ssh_password")},{default:a(()=>[l(d,{modelValue:t.SSHPassword,"onUpdate:modelValue":r=>t.SSHPassword=r},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"])]),_:2},1024),l(S,null,{default:a(()=>[l(F)]),_:1})]),_:2},1032,["model"])]),_:2},1024)]))),128)),l(u,{type:"primary",onClick:b.onNewGameBox},{default:a(()=>[s(m(e.$t("gamebox.publish")),1)]),_:1},8,["onClick"])]),_:1},8,["title","visible"]),l(w,{title:e.$t("gamebox.multi"),visible:e.mutliGameBoxDialogVisible},{default:a(()=>[h("span",null,[s(m(e.$t("gamebox.format"))+" ",1),W]),l($,null,{default:a(()=>[l(i,{label:e.$t("gamebox.json_string")},{default:a(()=>[l(d,{type:"textarea",modelValue:e.mutliGameBoxJSON,"onUpdate:modelValue":o[6]||(o[6]=t=>e.mutliGameBoxJSON=t)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),h("div",X,[l(u,{onClick:o[7]||(o[7]=t=>e.mutliGameBoxDialogVisible=!1)},{default:a(()=>[s(m(e.$t("general.cancel")),1)]),_:1}),l(u,{type:"primary",onClick:b.mutliGameBox},{default:a(()=>[s(m(e.$t("general.apply")),1)]),_:1},8,["onClick"])])]),_:1},8,["title","visible"]),l(w,{title:e.$t("gamebox.edit"),visible:e.editGameBoxDialogVisible},{default:a(()=>[l($,{"label-width":"120px"},{default:a(()=>[l(i,{label:e.$t("gamebox.challenge")},{default:a(()=>[s(m(e.editGameBoxForm.ChallengeTitle),1)]),_:1},8,["label"]),l(i,{label:e.$t("gamebox.team")},{default:a(()=>[s(m(e.editGameBoxForm.TeamName),1)]),_:1},8,["label"]),l(i,{label:e.$t("gamebox.ip")},{default:a(()=>[l(d,{modelValue:e.editGameBoxForm.IP,"onUpdate:modelValue":o[8]||(o[8]=t=>e.editGameBoxForm.IP=t),placeholder:e.$t("gamebox.ip_placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(i,{label:e.$t("gamebox.port")},{default:a(()=>[l(d,{modelValue:e.editGameBoxForm.Port,"onUpdate:modelValue":o[9]||(o[9]=t=>e.editGameBoxForm.Port=t),placeholder:e.$t("gamebox.port_placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(i,{label:e.$t("gamebox.description")},{default:a(()=>[l(d,{type:"textarea",rows:3,placeholder:e.$t("gamebox.description_placeholder"),modelValue:e.editGameBoxForm.Description,"onUpdate:modelValue":o[10]||(o[10]=t=>e.editGameBoxForm.Description=t)},null,8,["placeholder","modelValue"])]),_:1},8,["label"]),l(i,{label:e.$t("gamebox.ssh_port")},{default:a(()=>[l(d,{modelValue:e.editGameBoxForm.SSHPort,"onUpdate:modelValue":o[11]||(o[11]=t=>e.editGameBoxForm.SSHPort=t)},null,8,["modelValue"])]),_:1},8,["label"]),l(i,{label:e.$t("gamebox.ssh_user")},{default:a(()=>[l(d,{modelValue:e.editGameBoxForm.SSHUser,"onUpdate:modelValue":o[12]||(o[12]=t=>e.editGameBoxForm.SSHUser=t)},null,8,["modelValue"])]),_:1},8,["label"]),l(i,{label:e.$t("gamebox.ssh_password")},{default:a(()=>[l(d,{modelValue:e.editGameBoxForm.SSHPassword,"onUpdate:modelValue":o[13]||(o[13]=t=>e.editGameBoxForm.SSHPassword=t)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),l(u,{type:"primary",onClick:b.onEditGameBox},{default:a(()=>[s(m(e.$t("gamebox.edit")),1)]),_:1},8,["onClick"]),l(u,{onClick:o[14]||(o[14]=t=>b.testGameBoxSSH(e.editGameBoxForm.IP,e.editGameBoxForm.SSHPort,e.editGameBoxForm.SSHUser,e.editGameBoxForm.SSHPassword))},{default:a(()=>[s(m(e.$t("gamebox.test_ssh")),1)]),_:1})]),_:1},8,["title","visible"]),l(w,{title:e.$t("gamebox.test_ssh_fail"),visible:e.sshFailDialogVisible},{default:a(()=>[h("div",{innerHTML:e.sshFailContent},null,8,Y),h("div",Z,[l(u,{onClick:o[15]||(o[15]=t=>e.sshFailDialogVisible=!1)},{default:a(()=>[s(m(e.$t("general.apply")),1)]),_:1})])]),_:1},8,["title","visible"]),l(w,{title:"从镜像部署题目",visible:e.dockerImageVisible,width:"70%"},{default:a(()=>[x((g(),c($,null,{default:a(()=>[l(d,{placeholder:"your_name/web_challenge:latest",modelValue:e.dockerImageText,"onUpdate:modelValue":o[16]||(o[16]=t=>e.dockerImageText=t)},{default:a(()=>[ee,l(u,{slot:"append",icon:"el-icon-search",onClick:b.getImageData},{default:a(()=>[s("获取镜像信息")]),_:1},8,["onClick"])]),_:1},8,["modelValue"])]),_:1})),[[U,e.loadingDockerfile]]),le,e.dockerInfo!=null?(g(),V("div",oe,[l(H,{gutter:24},{default:a(()=>[l(S,{span:12},{default:a(()=>[l($,{inline:!0,"label-width":"120px"},{default:a(()=>[l(i,{label:e.$t("gamebox.challenge_placeholder")},{default:a(()=>[l(y,{modelValue:e.dockerForm.Challenge,"onUpdate:modelValue":o[17]||(o[17]=t=>e.dockerForm.Challenge=t),placeholder:e.$t("gamebox.challenge_placeholder")},{default:a(()=>[(g(!0),V(B,null,I(e.challenges,t=>(g(),c(G,{key:t.ID,label:t.Title,value:t.ID},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),l(i,{label:"题目 IP"},{default:a(()=>[l(d,{placeholder:"题目 IP",modelValue:e.dockerForm.IP,"onUpdate:modelValue":o[18]||(o[18]=t=>e.dockerForm.IP=t)},null,8,["modelValue"])]),_:1}),l(i,{label:"容器端口"},{default:a(()=>[l(d,{placeholder:"容器端口",modelValue:e.dockerForm.ServicePort,"onUpdate:modelValue":o[19]||(o[19]=t=>e.dockerForm.ServicePort=t)},null,8,["modelValue"])]),_:1}),l(i,{label:"容器 SSH 端口"},{default:a(()=>[l(d,{placeholder:"容器 SSH 端口",modelValue:e.dockerForm.SSHPort,"onUpdate:modelValue":o[20]||(o[20]=t=>e.dockerForm.SSHPort=t)},null,8,["modelValue"])]),_:1}),ae,te]),_:1})]),_:1}),l(S,{span:12},{default:a(()=>[l($,{inline:!0,"label-width":"120px"},{default:a(()=>[l(i,{label:"root SSH 用户名"},{default:a(()=>[l(d,{placeholder:"root SSH 用户名",modelValue:e.dockerForm.RootSSHName,"onUpdate:modelValue":o[21]||(o[21]=t=>e.dockerForm.RootSSHName=t)},null,8,["modelValue"])]),_:1}),l(i,{label:"选手 SSH 用户名"},{default:a(()=>[l(d,{placeholder:"选手 SSH 用户名",modelValue:e.dockerForm.UserSSHName,"onUpdate:modelValue":o[22]||(o[22]=t=>e.dockerForm.UserSSHName=t)},null,8,["modelValue"])]),_:1})]),_:1}),s(" 题目描述 "),l(d,{rows:5,type:"textarea",placeholder:"请输入内容",modelValue:e.dockerForm.Description,"onUpdate:modelValue":o[23]||(o[23]=t=>e.dockerForm.Description=t)},null,8,["modelValue"])]),_:1})]),_:1}),l(F,{"content-position":"left"},{default:a(()=>[s("端口映射")]),_:1}),l($,{inline:!0,"label-width":"30px"},{default:a(()=>[(g(!0),V(B,null,I(e.dockerForm.Ports,(t,k)=>(g(),c(i,{key:k,style:{"margin-bottom":"0px"}},{default:a(()=>[l(d,{style:{width:"180px"},placeholder:"映射端口",modelValue:t.Out,"onUpdate:modelValue":r=>t.Out=r,size:"mini",min:1,max:65535},{default:a(()=>[h("template",se,[s(" -> "+m(t.In)+" ",1),l(u,{icon:"el-icon-error",onClick:r=>e.dockerForm.Ports.splice(k,1)},null,8,["onClick"])])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024))),128))]),_:1}),l($,{inline:!0,"label-width":"30px"},{default:a(()=>[l(i,null,{default:a(()=>[e.inputPortVisible?(g(),c(d,{key:0,modelValue:e.inputPortValue,"onUpdate:modelValue":o[24]||(o[24]=t=>e.inputPortValue=t),ref:"portInput",size:"mini",onKeyup:L(b.inputPortConfirm,["enter","native"]),onBlur:b.inputPortConfirm,minlength:"1",maxlength:"5",label:"容器内端口"},null,8,["modelValue","onKeyup","onBlur"])):(g(),c(u,{key:1,size:"mini",onClick:o[25]||(o[25]=()=>{e.inputPortVisible=!0,this.$nextTick(t=>{this.$refs.portInput.$refs.input.focus()})})},{default:a(()=>[s("+ 添加端口 ")]),_:1}))]),_:1})]),_:1}),l(T,{size:"mini",data:e.teams,stripe:"","max-height":"300",style:{width:"100%"}},{default:a(()=>[l(f,{prop:"Name",label:"队伍名",width:"180"}),l(f,{label:"端口配置"},{default:a(()=>[h("template",re,[(g(!0),V(B,null,I(e.dockerForm.Ports,(t,k)=>(g(),c(E,{size:"mini",key:k,effect:"plain",style:{"margin-right":"10px"}},{default:a(()=>[s(m(Number(t.Out)+e.scope.$index)+" -> "+m(t.In),1)]),_:2},1024))),128))])]),_:1}),l(f,{label:"容器名"},{default:a(()=>[h("template",ne,[s(m(e.dockerInfo.Name)+"_"+m(e.scope.row.Name),1)])]),_:1})]),_:1},8,["data"])])):A("",!0),h("div",ie,[l(u,{onClick:o[26]||(o[26]=t=>e.dockerImageVisible=!1)},{default:a(()=>[s("取 消")]),_:1}),l(u,{type:"primary",onClick:b.deployFromDocker},{default:a(()=>[s("添加")]),_:1},8,["onClick"])])]),_:1},8,["visible"])])}const ue=J(j,[["render",me]]);export{ue as default};
